{"version":3,"sources":["webpack:///./node_modules/rxjs/_esm5/internal/operators/takeLast.js","webpack:///./src/permission/group.vue?be1d","webpack:///./src/permission/ts/group.ts","webpack:///./src/permission/ts/group.ts?2143","webpack:///./src/permission/group.vue","webpack:///./node_modules/rxjs/_esm5/internal/operators/defaultIfEmpty.js","webpack:///./src/http/permission.ts","webpack:///./node_modules/rxjs/_esm5/internal/operators/scan.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/reduce.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/toArray.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/filter.js"],"names":["takeLast","count","source","lift","TakeLastOperator","total","this","prototype","call","subscriber","subscribe","TakeLastSubscriber","_super","destination","_this","ring","Array","_next","value","length","push","index","_complete","i","idx","next","complete","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","$event","add","_v","data","column","scopedSlots","_u","key","fn","row","edit","scope","id","remove","showDialog","ref","rules","form","model","callback","$$v","$set","expression","permissionData","defaultProps","checkChange","submit","staticRenderFns","prop","title","slot","children","label","name","permission","required","showDialogChange","val","editId","$form","clearValidate","created","getGroupList","pipe","tap","v","mergeMap","$tree","getCheckedKeys","join","$nextTick","setCheckedKeys","split","$confirm","deleteGroup","$message","type","message","validate","valid","$loading","saveGroup","addGroup","GroupComponent","component","defaultIfEmpty","defaultValue","DefaultIfEmptyOperator","DefaultIfEmptySubscriber","isEmpty","defaultPermissionList","date","path","defaultUserList","username","password","groupId","defaultGroupList","keywrod","getAllPermission","item","array","forEach","getUserList","create","obs","localStorage","userList","JSON","parse","addUser","params","HttpPermission","Math","floor","Date","getTime","random","stringify","deleteUser","saveUser","list","res","error","Error","getPermissionList","permissionList","addPermission","all","find","savePermission","getUserAuth","auth","route","mockGetAuth","ids","permissions","indexOf","_children","router","scan","accumulator","seed","hasSeed","arguments","ScanOperator","ScanSubscriber","_seed","Object","defineProperty","get","set","enumerable","configurable","_tryNext","result","err","Subscriber","reduce","acc","toArrayReducer","arr","toArray","filter","predicate","thisArg","FilterOperator","FilterSubscriber"],"mappings":"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","file":"js/chunk-306c9f51.eb270057.js","sourcesContent":["/** PURE_IMPORTS_START tslib,_Subscriber,_util_ArgumentOutOfRangeError,_observable_empty PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { ArgumentOutOfRangeError } from '../util/ArgumentOutOfRangeError';\nimport { empty } from '../observable/empty';\nexport function takeLast(count) {\n    return function takeLastOperatorFunction(source) {\n        if (count === 0) {\n            return empty();\n        }\n        else {\n            return source.lift(new TakeLastOperator(count));\n        }\n    };\n}\nvar TakeLastOperator = /*@__PURE__*/ (function () {\n    function TakeLastOperator(total) {\n        this.total = total;\n        if (this.total < 0) {\n            throw new ArgumentOutOfRangeError;\n        }\n    }\n    TakeLastOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new TakeLastSubscriber(subscriber, this.total));\n    };\n    return TakeLastOperator;\n}());\nvar TakeLastSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(TakeLastSubscriber, _super);\n    function TakeLastSubscriber(destination, total) {\n        var _this = _super.call(this, destination) || this;\n        _this.total = total;\n        _this.ring = new Array();\n        _this.count = 0;\n        return _this;\n    }\n    TakeLastSubscriber.prototype._next = function (value) {\n        var ring = this.ring;\n        var total = this.total;\n        var count = this.count++;\n        if (ring.length < total) {\n            ring.push(value);\n        }\n        else {\n            var index = count % total;\n            ring[index] = value;\n        }\n    };\n    TakeLastSubscriber.prototype._complete = function () {\n        var destination = this.destination;\n        var count = this.count;\n        if (count > 0) {\n            var total = this.count >= this.total ? this.total : this.count;\n            var ring = this.ring;\n            for (var i = 0; i < total; i++) {\n                var idx = (count++) % total;\n                destination.next(ring[idx]);\n            }\n        }\n        destination.complete();\n    };\n    return TakeLastSubscriber;\n}(Subscriber));\n//# sourceMappingURL=takeLast.js.map\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-container\"},[_c('NavigationTool',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.add()}}},[_vm._v(\"添加权限组\")])],1),_c('el-card',[_c('ml-table',{attrs:{\"data\":_vm.data,\"column\":_vm.column,\"border\":\"\"},scopedSlots:_vm._u([{key:\"operating\",fn:function(row){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.edit(row.scope.id, row.scope)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.remove(row.scope.id)}}},[_vm._v(\"删除\")])]}}])})],1),_c('el-dialog',{attrs:{\"title\":\"添加权限组\",\"visible\":_vm.showDialog},on:{\"update:visible\":function($event){_vm.showDialog=$event}}},[_c('el-form',{ref:\"$form\",attrs:{\"label-width\":\"100px\",\"rules\":_vm.rules,\"model\":_vm.form}},[_c('el-form-item',{attrs:{\"label\":\"身份\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"placeholder\":\"\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"选择权限\",\"prop\":\"permission\"}},[_c('el-tree',{ref:\"$tree\",attrs:{\"node-key\":\"id\",\"data\":_vm.permissionData,\"show-checkbox\":\"\",\"props\":_vm.defaultProps},on:{\"check-change\":_vm.checkChange}})],1),_c('el-form-item',{attrs:{\"label\":\"\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"保存\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue'\nimport Component from 'vue-class-component';\nimport { TableColumn } from '@/component/ts/table';\nimport HttpPermission, { Permission } from '@/http/permission';\nimport { mergeMap, tap } from 'rxjs/operators';\nimport { Ref, Watch } from 'vue-property-decorator';\nimport { ElForm } from 'element-ui/types/form';\nimport { ElTree, TreeData } from 'element-ui/types/tree';\n\n@Component\nexport default class GroupComponent extends Vue {\n\n    @Ref() private readonly $form!: ElForm;\n    @Ref() private readonly $tree!: ElTree<any, TreeData>;\n    private data: Permission.group[] = []\n    private column: TableColumn = [\n        { prop: 'id', title: 'id' },\n        { prop: 'name', title: '身份' },\n        { slot: 'operating', title: '编辑' }\n    ]\n    private permissionData!: any[]\n    private showDialog = false;\n    private editId!: number;\n    private defaultProps = {\n        children: 'children',\n        label: 'name'\n    }\n    private form = { name: '', permission: '' }\n    private rules = {\n        name:[\n            { required: true }\n        ],\n        permission: [ { required: true } ]\n    }\n    @Watch('showDialog')\n    private showDialogChange(val: boolean){\n        this.form = { name: '', permission: '' }\n        this.editId = 0;\n        this.$form && this.$form.clearValidate()\n    }\n\n\n    private created(){\n\n        HttpPermission.getGroupList().pipe(\n            tap(v => this.data = v),\n            mergeMap(v => HttpPermission.getPermissionList()),\n            tap(v => this.permissionData = v)\n        ).subscribe()\n\n    }\n\n    private checkChange(){\n        this.form.permission = this.$tree.getCheckedKeys().join('-')\n    }\n\n    private add(): void {\n        this.showDialog = true;\n    }\n\n    \n    private edit(id: number, data: any): void {\n        this.showDialog = true;\n        this.$nextTick(() => {\n            this.editId = id;\n            this.form.name = data.name\n            this.form.permission = data.permission\n            this.$tree.setCheckedKeys(data.permission.split('-'))\n        })\n    }\n\n    private remove(id: number): void {\n        this.$confirm('确定删除吗').pipe(\n            mergeMap(v => HttpPermission.deleteGroup(id)),\n            mergeMap(v => HttpPermission.getGroupList()),\n            tap(v => this.data = v),\n            mergeMap(v => this.$message({type:'success',message:'删除成功'}))\n        ).subscribe()\n    }\n\n    private submit(): void {\n        this.$form.validate(valid => {\n            if(!valid) return;\n            this.$loading({}).pipe(\n                mergeMap(v => this.editId ? HttpPermission.saveGroup({...this.form, id: this.editId}): HttpPermission.addGroup(this.form)),\n                mergeMap(v => HttpPermission.getGroupList()),\n                tap(v => this.data = v),\n                mergeMap(v => this.$hideLoading()),\n                mergeMap(v => this.$message({type:'success',message:`${this.editId?\"编辑\":\"添加\"}成功`})),\n                tap(v => this.showDialog=false),\n            ).subscribe()\n        })\n    }\n\n}","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/ts-loader/index.js??ref--13-3!./group.ts?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/ts-loader/index.js??ref--13-3!./group.ts?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./group.vue?vue&type=template&id=7c40fc0a&\"\nimport script from \"./ts/group?vue&type=script&lang=js&\"\nexport * from \"./ts/group?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function defaultIfEmpty(defaultValue) {\n    if (defaultValue === void 0) {\n        defaultValue = null;\n    }\n    return function (source) { return source.lift(new DefaultIfEmptyOperator(defaultValue)); };\n}\nvar DefaultIfEmptyOperator = /*@__PURE__*/ (function () {\n    function DefaultIfEmptyOperator(defaultValue) {\n        this.defaultValue = defaultValue;\n    }\n    DefaultIfEmptyOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DefaultIfEmptySubscriber(subscriber, this.defaultValue));\n    };\n    return DefaultIfEmptyOperator;\n}());\nvar DefaultIfEmptySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(DefaultIfEmptySubscriber, _super);\n    function DefaultIfEmptySubscriber(destination, defaultValue) {\n        var _this = _super.call(this, destination) || this;\n        _this.defaultValue = defaultValue;\n        _this.isEmpty = true;\n        return _this;\n    }\n    DefaultIfEmptySubscriber.prototype._next = function (value) {\n        this.isEmpty = false;\n        this.destination.next(value);\n    };\n    DefaultIfEmptySubscriber.prototype._complete = function () {\n        if (this.isEmpty) {\n            this.destination.next(this.defaultValue);\n        }\n        this.destination.complete();\n    };\n    return DefaultIfEmptySubscriber;\n}(Subscriber));\n//# sourceMappingURL=defaultIfEmpty.js.map\n","import { Observable, of, throwError } from 'rxjs';\nimport { tap, filter, mergeMap, map, toArray, catchError } from 'rxjs/operators';\n\nconst defaultPermissionList = [\n    {\n        id: 1,\n        date: '2016-05-02',\n        name: '表格',\n        path: 'table',\n        children: [],\n    },\n    {\n        id: 2,\n        date: '2016-05-02',\n        name: '表单',\n        path: 'form',\n        children: [],\n    },\n    {\n        id: 3,\n        date: '2016-05-02',\n        name: 'rxjs',\n        path: 'rxjs',\n        children: [],\n    },\n    {\n        id: 4,\n        date: '2016-05-02',\n        name: '列表',\n        path: 'list',\n        children: [],\n    },\n    {\n        id: 5,\n        date: '2016-05-02',\n        name: '富文本',\n        path: 'rich-text',\n        children: [],\n    },\n    {\n        id: 6,\n        date: '2016-05-02',\n        name: '小工具',\n        path: 'tool',\n        children: [],\n    },\n    {\n        id: 7,\n        date: '2016-05-02',\n        name: '测试路由',\n        path: 'test',\n        children: [\n            {\n                id: 8,\n                date: '2018-03-01',\n                name: '第一个',\n                path: 'test1',\n                children: []\n            },\n            {\n                id: 9,\n                date: '2018-03-01',\n                name: '第二个',\n                path: 'test2',\n                children: []\n            },\n            {\n                id: 10,\n                date: '2018-03-01',\n                name: '第三个',\n                path: 'test3',\n                children: []\n            }\n        ]\n    },\n    {\n        id: 11,\n        date: '2016-05-02',\n        name: '更新日志',\n        path: 'update-log',\n        children: []\n    },\n    {\n        id: 12,\n        date: '2016-05-02',\n        name: '用户管理',\n        path: 'user',\n        children: [\n            {\n                id: 13,\n                date: '2018-02-01',\n                name: '用户',\n                path: 'user',\n                children: []\n            },\n            {\n                id: 14,\n                date: '2018-02-01',\n                name: '权限组',\n                path: 'group',\n                children: []\n            },\n            {\n                id: 15,\n                date: '2018-02-01',\n                name: '权限',\n                path: 'permission',\n                children: []\n            }\n        ]\n    }]\nconst defaultUserList = [\n    { id: 1, username: 'admin', password: 'admin', groupId: 1 }\n]\nconst defaultGroupList = [\n    {\n        id: 1,\n        keywrod: 'admin',\n        name: '管理员',\n        permission: '*'\n    }\n]\nfunction getAllPermission(item: any[], array: any[]){\n    item.forEach(v => {\n        array.push(v);\n        if(v.children){\n            getAllPermission(v.children, array)\n        }\n    })\n}\nexport namespace Permission{\n    export interface group {\n        id: number\n        name: string\n        permission: string\n    }\n    export interface user {\n        id: number\n        username: string, \n        password: string, \n        groupId: number\n    }\n    export interface permission {\n        id: number\n        date: string,\n        name: string,\n        path: string\n        children: permission[]\n    }\n}\n\nexport default class HttpPermission{\n\n    public static getUserList(): Observable<Permission.user[]>{\n        return Observable.create((obs: any) => {\n            obs.next(localStorage.userList ? JSON.parse(localStorage.userList) : defaultUserList)\n            obs.complete()\n        })\n    }\n    public static addUser(params:{ username: string, password: string, groupId: number }): Observable<any> {\n        return HttpPermission.getUserList().pipe(\n            tap(v => {\n                const id = Math.floor((new Date().getTime() / 1000000+Math.random()*100000));\n                v.push({ id, ...params })\n                localStorage.userList = JSON.stringify(v)\n            })\n        )\n    }\n    public static deleteUser(id: number): Observable<any> {\n        return HttpPermission.getUserList().pipe(\n                mergeMap(v => v),\n                filter(v => v.id != id),\n                toArray(),\n                tap(v => {\n                    localStorage.userList = JSON.stringify(v)\n                })\n            )\n    }\n    public static saveUser(params:{ username: string, password: string, groupId: number, id: number }): Observable<any> {\n        return Observable.create((obs: any) => {\n            let list: any = [];\n            HttpPermission.getUserList().pipe(\n                tap(v => list = v),\n                mergeMap(v => v),\n                filter(v => v.id == params.id),\n                tap(v => {\n                    v.username = params.username\n                    v.password = params.password\n                    v.groupId = params.groupId\n                    localStorage.userList = JSON.stringify(list)\n                }),\n                toArray()\n            ).subscribe(res => {\n                if(res.length){\n                    obs.next()\n                    obs.complete()\n                }else{\n                    obs.error(new Error('用户不存在'))\n                    obs.complete()\n                }\n            })\n           \n            \n        })\n    }\n\n    public static getGroupList(): Observable<Permission.group[]>{\n        return Observable.create((obs: any) => {\n            obs.next(localStorage.defaultGroupList ? JSON.parse(localStorage.defaultGroupList) : defaultGroupList)\n            obs.complete()\n        })\n    }\n    public static addGroup(params: { name: string, permission: string }): Observable<any> {\n        return HttpPermission.getGroupList().pipe(\n            tap(v => {\n                const id = Math.floor((new Date().getTime() / 1000000+Math.random()*100000));\n                v.push({ id, ...params })\n                localStorage.defaultGroupList = JSON.stringify(v)\n            })\n        )\n    }\n    public static saveGroup(params:{ name: string, permission: string, id: number }): Observable<any> {\n        return Observable.create((obs: any) => {\n            let list: any = [];\n            HttpPermission.getGroupList().pipe(\n                tap(v => list = v),\n                mergeMap(v => v),\n                filter(v => v.id == params.id),\n                tap(v => {\n                    v.name = params.name\n                    v.permission = params.permission\n                    localStorage.defaultGroupList = JSON.stringify(list)\n                }),\n                toArray()\n            ).subscribe(res => {\n                if(res.length){\n                    obs.next()\n                    obs.complete()\n                }else{\n                    obs.error(new Error('用户不存在'))\n                    obs.complete()\n                }\n            })\n           \n            \n        })\n    }\n    public static deleteGroup(id: number): Observable<any> {\n        return HttpPermission.getGroupList().pipe(\n                mergeMap(v => v),\n                filter(v => v.id != id),\n                toArray(),\n                tap(v => {\n                    localStorage.defaultGroupList = JSON.stringify(v)\n                })\n            )\n    }\n\n    public static getPermissionList(): Observable<Permission.permission[]>{\n        return Observable.create((obs: any) => {\n            obs.next(localStorage.permissionList? JSON.parse(localStorage.permissionList):defaultPermissionList);\n            obs.complete()\n        })\n    }\n    public static addPermission(params:{ id?: number, name: string, path: string }): Observable<any> {\n        return Observable.create((obs: any) => {\n            HttpPermission.getPermissionList().pipe(\n                map(v => {\n                    if(params.id) {\n                        const all: any[] = [];\n                        getAllPermission(v, all);\n                        return all.find(v => v.id == params.id)\n                    }\n                    else return v\n                }),\n                tap(v => {\n                    const data = {\n                        id: Math.floor((new Date().getTime() / 1000000+Math.random()*100000)),\n                        name: params.name,\n                        path: params.path,\n                        date: '2019-08-02',\n                        children: []\n                    }\n                    if(v.children){\n                        v.children.push(data);\n                    }else{\n                        defaultPermissionList.push(data)\n                    }\n                    \n                    localStorage.permissionList = JSON.stringify(defaultPermissionList)\n                    obs.next()\n                    obs.complete()\n                })\n            ).subscribe()\n        })\n    }\n    \n    public static savePermission(params:{ id: number, name: string, path: string }): Observable<any> {\n        \n        return Observable.create((obs: any) => {\n            let list: any = [];\n            HttpPermission.getPermissionList().pipe(\n                tap(v => list = v),\n                map(v => {\n                    const all: any[] = [];\n                    getAllPermission(v, all);\n                    return all.find(v => v.id == params.id)\n                }),\n                tap(v => {\n                    v.name = params.name\n                    v.path = params.path\n                    localStorage.permissionList = JSON.stringify(list)\n                    obs.next()\n                    obs.complete()\n                })\n            ).subscribe()\n        })\n    }\n\n    public static getUserAuth(params:{ username: string, password: string }): Observable<any>  {\n        return Observable.create((obs: any) => {\n            let isError: boolean = true;\n            HttpPermission.getUserList().pipe(\n                mergeMap(v => v),\n                filter(v => v.username == params.username && v.password == params.password),\n                map(v => v.groupId),\n                mergeMap(groupId => HttpPermission.getGroupList().pipe( \n                    mergeMap(v => v),\n                    filter(v => v.id == groupId),\n                    map(v => v.permission)\n                )),\n                mergeMap(permission => {\n                    isError = false;\n                    if(permission == '*') return of('*');\n                    else return HttpPermission.getPermissionList().pipe(\n                        map(v => {\n                            const auth: string[] = permission.split('-');\n                            const route: any[] = []\n                            mockGetAuth(auth, route, v)\n                            return route\n                        })\n                    )\n                }),\n                toArray()\n            ).subscribe(res => {\n                if(res.length){\n                    obs.next(res[0])\n                    obs.complete()\n                }else{\n                    obs.error(new Error('用户名或密码不正确'))\n                    obs.complete()\n                }\n            })\n           \n        })\n    }\n\n}\n\nfunction mockGetAuth(ids: string[], route: any[], permissions: Permission.permission[]){\n    \n    permissions.forEach(v => {\n        if(ids.indexOf(v.id+'') == -1) return;\n        const _children: any[] = [];\n        const children = v.children;\n        const router = {...v, children: _children};\n        route.push(router);\n        if(children && children.length){\n            mockGetAuth(ids, _children, children)\n        }\n        \n    })\n}","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function scan(accumulator, seed) {\n    var hasSeed = false;\n    if (arguments.length >= 2) {\n        hasSeed = true;\n    }\n    return function scanOperatorFunction(source) {\n        return source.lift(new ScanOperator(accumulator, seed, hasSeed));\n    };\n}\nvar ScanOperator = /*@__PURE__*/ (function () {\n    function ScanOperator(accumulator, seed, hasSeed) {\n        if (hasSeed === void 0) {\n            hasSeed = false;\n        }\n        this.accumulator = accumulator;\n        this.seed = seed;\n        this.hasSeed = hasSeed;\n    }\n    ScanOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new ScanSubscriber(subscriber, this.accumulator, this.seed, this.hasSeed));\n    };\n    return ScanOperator;\n}());\nvar ScanSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ScanSubscriber, _super);\n    function ScanSubscriber(destination, accumulator, _seed, hasSeed) {\n        var _this = _super.call(this, destination) || this;\n        _this.accumulator = accumulator;\n        _this._seed = _seed;\n        _this.hasSeed = hasSeed;\n        _this.index = 0;\n        return _this;\n    }\n    Object.defineProperty(ScanSubscriber.prototype, \"seed\", {\n        get: function () {\n            return this._seed;\n        },\n        set: function (value) {\n            this.hasSeed = true;\n            this._seed = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ScanSubscriber.prototype._next = function (value) {\n        if (!this.hasSeed) {\n            this.seed = value;\n            this.destination.next(value);\n        }\n        else {\n            return this._tryNext(value);\n        }\n    };\n    ScanSubscriber.prototype._tryNext = function (value) {\n        var index = this.index++;\n        var result;\n        try {\n            result = this.accumulator(this.seed, value, index);\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n        this.seed = result;\n        this.destination.next(result);\n    };\n    return ScanSubscriber;\n}(Subscriber));\n//# sourceMappingURL=scan.js.map\n","/** PURE_IMPORTS_START _scan,_takeLast,_defaultIfEmpty,_util_pipe PURE_IMPORTS_END */\nimport { scan } from './scan';\nimport { takeLast } from './takeLast';\nimport { defaultIfEmpty } from './defaultIfEmpty';\nimport { pipe } from '../util/pipe';\nexport function reduce(accumulator, seed) {\n    if (arguments.length >= 2) {\n        return function reduceOperatorFunctionWithSeed(source) {\n            return pipe(scan(accumulator, seed), takeLast(1), defaultIfEmpty(seed))(source);\n        };\n    }\n    return function reduceOperatorFunction(source) {\n        return pipe(scan(function (acc, value, index) { return accumulator(acc, value, index + 1); }), takeLast(1))(source);\n    };\n}\n//# sourceMappingURL=reduce.js.map\n","/** PURE_IMPORTS_START _reduce PURE_IMPORTS_END */\nimport { reduce } from './reduce';\nfunction toArrayReducer(arr, item, index) {\n    if (index === 0) {\n        return [item];\n    }\n    arr.push(item);\n    return arr;\n}\nexport function toArray() {\n    return reduce(toArrayReducer, []);\n}\n//# sourceMappingURL=toArray.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function filter(predicate, thisArg) {\n    return function filterOperatorFunction(source) {\n        return source.lift(new FilterOperator(predicate, thisArg));\n    };\n}\nvar FilterOperator = /*@__PURE__*/ (function () {\n    function FilterOperator(predicate, thisArg) {\n        this.predicate = predicate;\n        this.thisArg = thisArg;\n    }\n    FilterOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new FilterSubscriber(subscriber, this.predicate, this.thisArg));\n    };\n    return FilterOperator;\n}());\nvar FilterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(FilterSubscriber, _super);\n    function FilterSubscriber(destination, predicate, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.thisArg = thisArg;\n        _this.count = 0;\n        return _this;\n    }\n    FilterSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.predicate.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (result) {\n            this.destination.next(value);\n        }\n    };\n    return FilterSubscriber;\n}(Subscriber));\n//# sourceMappingURL=filter.js.map\n"],"sourceRoot":""}