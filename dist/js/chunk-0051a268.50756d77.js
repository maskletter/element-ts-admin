(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0051a268"],{"0318":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("9ab4"),i=n("1453"),a=n("6fb9"),o=n("1b92");function c(t){return function(e){return 0===t?Object(o["a"])():e.lift(new u(t))}}var u=function(){function t(t){if(this.total=t,this.total<0)throw new a["a"]}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.total))},t}(),s=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return r["d"](e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;if(e.length<n)e.push(t);else{var i=r%n;e[i]=t}},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var a=e++%n;t.next(r[a])}t.complete()},e}(i["a"])},"1c90":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("9ab4"),i=n("1453");function a(t){return void 0===t&&(t=null),function(e){return e.lift(new o(t))}}var o=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.defaultValue))},t}(),c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return r["d"](e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(i["a"])},"29c3":function(t,e,n){"use strict";n("7db0"),n("4160"),n("c975"),n("0d03"),n("b0c0"),n("ac1f"),n("1276"),n("159b");var r=n("9ab4"),i=n("e9b9"),a=n("17f5"),o=n("c4cc"),c=n("a6c5"),u=n("5670"),s=n("47ea"),l=n("ebb6"),d=[{id:1,date:"2016-05-02",name:"表格",path:"table",children:[]},{id:2,date:"2016-05-02",name:"表单",path:"form",children:[]},{id:3,date:"2016-05-02",name:"rxjs",path:"rxjs",children:[]},{id:4,date:"2016-05-02",name:"列表",path:"list",children:[]},{id:5,date:"2016-05-02",name:"富文本",path:"rich-text",children:[]},{id:6,date:"2016-05-02",name:"小工具",path:"tool",children:[]},{id:7,date:"2016-05-02",name:"测试路由",path:"test",children:[{id:8,date:"2018-03-01",name:"第一个",path:"test1",children:[]},{id:9,date:"2018-03-01",name:"第二个",path:"test2",children:[]},{id:10,date:"2018-03-01",name:"第三个",path:"test3",children:[]}]},{id:11,date:"2016-05-02",name:"更新日志",path:"update-log",children:[]},{id:12,date:"2016-05-02",name:"用户管理",path:"user",children:[{id:13,date:"2018-02-01",name:"用户",path:"user",children:[]},{id:14,date:"2018-02-01",name:"权限组",path:"group",children:[]},{id:15,date:"2018-02-01",name:"权限",path:"permission",children:[]}]}],f=[{id:1,username:"admin",password:"admin",groupId:1}],p=[{id:1,keywrod:"admin",name:"管理员",permission:"*"}];function h(t,e){t.forEach((function(t){e.push(t),t.children&&h(t.children,e)}))}var b=function(){function t(){}return t.getUserList=function(){return i["a"].create((function(t){t.next(localStorage.userList?JSON.parse(localStorage.userList):f),t.complete()}))},t.addUser=function(e){return t.getUserList().pipe(Object(o["a"])((function(t){var n=Math.floor((new Date).getTime()/1e6+1e5*Math.random());t.push(Object(r["a"])({id:n},e)),localStorage.userList=JSON.stringify(t)})))},t.deleteUser=function(e){return t.getUserList().pipe(Object(c["a"])((function(t){return t})),Object(u["a"])((function(t){return t.id!=e})),Object(s["a"])(),Object(o["a"])((function(t){localStorage.userList=JSON.stringify(t)})))},t.saveUser=function(e){return i["a"].create((function(n){var r=[];t.getUserList().pipe(Object(o["a"])((function(t){return r=t})),Object(c["a"])((function(t){return t})),Object(u["a"])((function(t){return t.id==e.id})),Object(o["a"])((function(t){t.username=e.username,t.password=e.password,t.groupId=e.groupId,localStorage.userList=JSON.stringify(r)})),Object(s["a"])()).subscribe((function(t){t.length?(n.next(),n.complete()):(n.error(new Error("用户不存在")),n.complete())}))}))},t.getGroupList=function(){return i["a"].create((function(t){t.next(localStorage.defaultGroupList?JSON.parse(localStorage.defaultGroupList):p),t.complete()}))},t.addGroup=function(e){return t.getGroupList().pipe(Object(o["a"])((function(t){var n=Math.floor((new Date).getTime()/1e6+1e5*Math.random());t.push(Object(r["a"])({id:n},e)),localStorage.defaultGroupList=JSON.stringify(t)})))},t.saveGroup=function(e){return i["a"].create((function(n){var r=[];t.getGroupList().pipe(Object(o["a"])((function(t){return r=t})),Object(c["a"])((function(t){return t})),Object(u["a"])((function(t){return t.id==e.id})),Object(o["a"])((function(t){t.name=e.name,t.permission=e.permission,localStorage.defaultGroupList=JSON.stringify(r)})),Object(s["a"])()).subscribe((function(t){t.length?(n.next(),n.complete()):(n.error(new Error("用户不存在")),n.complete())}))}))},t.deleteGroup=function(e){return t.getGroupList().pipe(Object(c["a"])((function(t){return t})),Object(u["a"])((function(t){return t.id!=e})),Object(s["a"])(),Object(o["a"])((function(t){localStorage.defaultGroupList=JSON.stringify(t)})))},t.getPermissionList=function(){return i["a"].create((function(t){t.next(localStorage.permissionList?JSON.parse(localStorage.permissionList):d),t.complete()}))},t.addPermission=function(e){return i["a"].create((function(n){t.getPermissionList().pipe(Object(l["a"])((function(t){if(e.id){var n=[];return h(t,n),n.find((function(t){return t.id==e.id}))}return t})),Object(o["a"])((function(t){var r={id:Math.floor((new Date).getTime()/1e6+1e5*Math.random()),name:e.name,path:e.path,date:"2019-08-02",children:[]};t.children?t.children.push(r):d.push(r),localStorage.permissionList=JSON.stringify(d),n.next(),n.complete()}))).subscribe()}))},t.savePermission=function(e){return i["a"].create((function(n){var r=[];t.getPermissionList().pipe(Object(o["a"])((function(t){return r=t})),Object(l["a"])((function(t){var n=[];return h(t,n),n.find((function(t){return t.id==e.id}))})),Object(o["a"])((function(t){t.name=e.name,t.path=e.path,localStorage.permissionList=JSON.stringify(r),n.next(),n.complete()}))).subscribe()}))},t.getUserAuth=function(e){return i["a"].create((function(n){t.getUserList().pipe(Object(c["a"])((function(t){return t})),Object(u["a"])((function(t){return t.username==e.username&&t.password==e.password})),Object(l["a"])((function(t){return t.groupId})),Object(c["a"])((function(e){return t.getGroupList().pipe(Object(c["a"])((function(t){return t})),Object(u["a"])((function(t){return t.id==e})),Object(l["a"])((function(t){return t.permission})))})),Object(c["a"])((function(e){return!1,"*"==e?Object(a["a"])("*"):t.getPermissionList().pipe(Object(l["a"])((function(t){var n=e.split("-"),r=[];return m(n,r,t),r})))})),Object(s["a"])()).subscribe((function(t){t.length?(n.next(t[0]),n.complete()):(n.error(new Error("用户名或密码不正确")),n.complete())}))}))},t}();function m(t,e,n){n.forEach((function(n){if(-1!=t.indexOf(n.id+"")){var i=[],a=n.children,o=Object(r["a"])(Object(r["a"])({},n),{children:i});e.push(o),a&&a.length&&m(t,i,a)}}))}e["a"]=b},4206:function(t,e,n){"use strict";var r=n("9ab4"),i=n("1453");function a(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new o(t,e,n))}}var o=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.accumulator,this.seed,this.hasSeed))},t}(),c=function(t){function e(e,n,r,i){var a=t.call(this,e)||this;return a.accumulator=n,a._seed=r,a.hasSeed=i,a.index=0,a}return r["d"](e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)},e}(i["a"]),u=n("0318"),s=n("1c90"),l=n("cb70");function d(t,e){return arguments.length>=2?function(n){return Object(l["a"])(a(t,e),Object(u["a"])(1),Object(s["a"])(e))(n)}:function(e){return Object(l["a"])(a((function(e,n,r){return t(e,n,r+1)})),Object(u["a"])(1))(e)}}n.d(e,"a",(function(){return d}))},"47ea":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("4206");function i(t,e,n){return 0===n?[e]:(t.push(e),t)}function a(){return Object(r["a"])(i,[])}},5371:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-container"},[n("NavigationTool",[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.add()}}},[t._v("添加用户")])],1),n("el-card",[n("ml-table",{attrs:{data:t.data,column:t.column,border:""},scopedSlots:t._u([{key:"operating",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return t.edit(e.scope.id,e.scope)}}},[t._v("编辑")]),n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.remove(e.scope.id)}}},[t._v("删除")])]}}])})],1),n("el-dialog",{attrs:{title:t.editId?"编辑用户":"添加用户",visible:t.showDialog},on:{"update:visible":function(e){t.showDialog=e}}},[n("el-form",{ref:"$form",attrs:{"label-width":"100px",rules:t.rules,model:t.form}},[n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{attrs:{placeholder:""},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{placeholder:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),n("el-form-item",{attrs:{label:"权限",prop:"groupId"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.groupId,callback:function(e){t.$set(t.form,"groupId",e)},expression:"form.groupId"}},t._l(t.selectData,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),n("el-form-item",{attrs:{label:""}},[n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("保存")])],1)],1)],1)],1)},i=[],a=n("9ab4"),o=n("8bbf"),c=n.n(o),u=n("2fe1"),s=n("29c3"),l=n("60a3"),d=n("a6c5"),f=n("c4cc"),p=n("f59d"),h=n("54da"),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=[],e.selectData=[],e.showDialog=!1,e.column=[{prop:"id",title:"id"},{prop:"username",title:"用户名"},{prop:"password",title:"密码"},{prop:"groupId",title:"权限id"},{slot:"operating",title:"编辑",width:"170"}],e.form={username:"",password:"",groupId:-1},e.rules={username:[{required:!0}],password:[{required:!0}],groupId:[{required:!0}]},e.editId=0,e}return Object(a["d"])(e,t),e.prototype.showDialogChange=function(t){this.form={username:"",password:"",groupId:-1},this.editId=0,this.$form&&this.$form.clearValidate()},e.prototype.add=function(){this.showDialog=!0},e.prototype.remove=function(t){var e=this;this.$confirm("确定删除吗").pipe(Object(d["a"])((function(e){return s["a"].deleteUser(t)})),Object(d["a"])((function(t){return s["a"].getUserList()})),Object(f["a"])((function(t){return e.data=t})),Object(d["a"])((function(t){return e.$message({type:"success",message:"删除成功"})}))).subscribe()},e.prototype.edit=function(t,e){var n=this;this.showDialog=!0,this.$nextTick((function(){n.editId=t,n.form.username=e.username,n.form.password=e.password,n.form.groupId=e.groupId}))},e.prototype.created=function(){var t=this;Object(h["a"])(s["a"].getUserList(),s["a"].getGroupList()).pipe(Object(f["a"])((function(e){t.data=e[0],t.selectData=e[1]}))).subscribe()},e.prototype.submit=function(){var t=this;this.$form.validate((function(e){e&&t.$loading({}).pipe(Object(d["a"])((function(e){return t.editId?s["a"].saveUser(Object(a["a"])(Object(a["a"])({},t.form),{id:t.editId})):s["a"].addUser(t.form)})),Object(d["a"])((function(t){return s["a"].getUserList()})),Object(f["a"])((function(e){return t.data=e})),Object(d["a"])((function(e){return t.$hideLoading()})),Object(d["a"])((function(e){return t.$message({type:"success",message:(t.editId?"编辑":"添加")+"成功"})})),Object(f["a"])((function(e){return t.showDialog=!1})),Object(p["a"])((function(e){return t.$message({type:"error",message:e}).pipe(Object(d["a"])((function(e){return t.$hideLoading()})))}))).subscribe()}))},Object(a["c"])([Object(l["c"])()],e.prototype,"$form",void 0),Object(a["c"])([Object(l["d"])("showDialog")],e.prototype,"showDialogChange",null),e=Object(a["c"])([u["b"]],e),e}(c.a),m=b,g=m,O=n("2877"),j=Object(O["a"])(g,r,i,!1,null,null,null);e["default"]=j.exports},"54da":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("e9b9"),i=n("8ac6"),a=n("ebb6"),o=n("31c4"),c=n("d3fb");function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){var n=t[0];if(Object(i["a"])(n))return s(n,null);if(Object(o["a"])(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return s(r.map((function(t){return n[t]})),r)}}if("function"===typeof t[t.length-1]){var c=t.pop();return t=1===t.length&&Object(i["a"])(t[0])?t[0]:t,s(t,null).pipe(Object(a["a"])((function(t){return c.apply(void 0,t)})))}return s(t,null)}function s(t,e){return new r["a"]((function(n){var r=t.length;if(0!==r)for(var i=new Array(r),a=0,o=0,u=function(u){var s=Object(c["a"])(t[u]),l=!1;n.add(s.subscribe({next:function(t){l||(l=!0,o++),i[u]=t},error:function(t){return n.error(t)},complete:function(){a++,a!==r&&l||(o===r&&n.next(e?e.reduce((function(t,e,n){return t[e]=i[n],t}),{}):i),n.complete())}}))},s=0;s<r;s++)u(s);else n.complete()}))}},5670:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("9ab4"),i=n("1453");function a(t,e){return function(n){return n.lift(new o(t,e))}}var o=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.predicate,this.thisArg))},t}(),c=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return r["d"](e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)},e}(i["a"])}}]);
//# sourceMappingURL=chunk-0051a268.50756d77.js.map