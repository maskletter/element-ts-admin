{"version":3,"sources":["webpack:///./node_modules/rxjs/_esm5/internal/operators/takeLast.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/defaultIfEmpty.js","webpack:///./src/http/permission.ts","webpack:///./node_modules/rxjs/_esm5/internal/operators/scan.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/reduce.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/toArray.js","webpack:///./src/permission/user.vue?80cb","webpack:///./src/permission/ts/user.ts","webpack:///./src/permission/ts/user.ts?0f3f","webpack:///./src/permission/user.vue","webpack:///./node_modules/rxjs/_esm5/internal/observable/forkJoin.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/filter.js"],"names":["takeLast","count","source","lift","TakeLastOperator","total","this","prototype","call","subscriber","subscribe","TakeLastSubscriber","_super","destination","_this","ring","Array","_next","value","length","push","index","_complete","i","idx","next","complete","defaultIfEmpty","defaultValue","DefaultIfEmptyOperator","DefaultIfEmptySubscriber","isEmpty","defaultPermissionList","id","date","name","path","children","defaultUserList","username","password","groupId","defaultGroupList","keywrod","permission","getAllPermission","item","array","forEach","v","getUserList","create","obs","localStorage","userList","JSON","parse","addUser","params","HttpPermission","pipe","Math","floor","Date","getTime","random","stringify","deleteUser","saveUser","list","res","error","Error","getGroupList","addGroup","saveGroup","deleteGroup","getPermissionList","permissionList","addPermission","all","find","data","savePermission","getUserAuth","auth","split","route","mockGetAuth","ids","permissions","indexOf","_children","router","scan","accumulator","seed","hasSeed","arguments","ScanOperator","ScanSubscriber","_seed","Object","defineProperty","get","set","enumerable","configurable","_tryNext","result","err","Subscriber","reduce","acc","toArrayReducer","arr","toArray","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","$event","add","_v","column","scopedSlots","_u","key","fn","row","edit","scope","remove","editId","showDialog","ref","rules","form","model","callback","$$v","$set","expression","_l","submit","staticRenderFns","selectData","prop","title","slot","width","required","showDialogChange","val","$form","clearValidate","$confirm","mergeMap","tap","$message","type","message","$nextTick","created","forkJoin","validate","valid","$loading","catchError","e","UserComponent","component","sources","_i","first_1","forkJoinInternal","getPrototypeOf","keys","map","resultSelector_1","pop","args","apply","len","values","completed","emitted","_loop_1","hasValue","filter","predicate","thisArg","FilterOperator","FilterSubscriber"],"mappings":"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","file":"js/chunk-0051a268.50756d77.js","sourcesContent":["/** PURE_IMPORTS_START tslib,_Subscriber,_util_ArgumentOutOfRangeError,_observable_empty PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { ArgumentOutOfRangeError } from '../util/ArgumentOutOfRangeError';\nimport { empty } from '../observable/empty';\nexport function takeLast(count) {\n    return function takeLastOperatorFunction(source) {\n        if (count === 0) {\n            return empty();\n        }\n        else {\n            return source.lift(new TakeLastOperator(count));\n        }\n    };\n}\nvar TakeLastOperator = /*@__PURE__*/ (function () {\n    function TakeLastOperator(total) {\n        this.total = total;\n        if (this.total < 0) {\n            throw new ArgumentOutOfRangeError;\n        }\n    }\n    TakeLastOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new TakeLastSubscriber(subscriber, this.total));\n    };\n    return TakeLastOperator;\n}());\nvar TakeLastSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(TakeLastSubscriber, _super);\n    function TakeLastSubscriber(destination, total) {\n        var _this = _super.call(this, destination) || this;\n        _this.total = total;\n        _this.ring = new Array();\n        _this.count = 0;\n        return _this;\n    }\n    TakeLastSubscriber.prototype._next = function (value) {\n        var ring = this.ring;\n        var total = this.total;\n        var count = this.count++;\n        if (ring.length < total) {\n            ring.push(value);\n        }\n        else {\n            var index = count % total;\n            ring[index] = value;\n        }\n    };\n    TakeLastSubscriber.prototype._complete = function () {\n        var destination = this.destination;\n        var count = this.count;\n        if (count > 0) {\n            var total = this.count >= this.total ? this.total : this.count;\n            var ring = this.ring;\n            for (var i = 0; i < total; i++) {\n                var idx = (count++) % total;\n                destination.next(ring[idx]);\n            }\n        }\n        destination.complete();\n    };\n    return TakeLastSubscriber;\n}(Subscriber));\n//# sourceMappingURL=takeLast.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function defaultIfEmpty(defaultValue) {\n    if (defaultValue === void 0) {\n        defaultValue = null;\n    }\n    return function (source) { return source.lift(new DefaultIfEmptyOperator(defaultValue)); };\n}\nvar DefaultIfEmptyOperator = /*@__PURE__*/ (function () {\n    function DefaultIfEmptyOperator(defaultValue) {\n        this.defaultValue = defaultValue;\n    }\n    DefaultIfEmptyOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DefaultIfEmptySubscriber(subscriber, this.defaultValue));\n    };\n    return DefaultIfEmptyOperator;\n}());\nvar DefaultIfEmptySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(DefaultIfEmptySubscriber, _super);\n    function DefaultIfEmptySubscriber(destination, defaultValue) {\n        var _this = _super.call(this, destination) || this;\n        _this.defaultValue = defaultValue;\n        _this.isEmpty = true;\n        return _this;\n    }\n    DefaultIfEmptySubscriber.prototype._next = function (value) {\n        this.isEmpty = false;\n        this.destination.next(value);\n    };\n    DefaultIfEmptySubscriber.prototype._complete = function () {\n        if (this.isEmpty) {\n            this.destination.next(this.defaultValue);\n        }\n        this.destination.complete();\n    };\n    return DefaultIfEmptySubscriber;\n}(Subscriber));\n//# sourceMappingURL=defaultIfEmpty.js.map\n","import { Observable, of, throwError } from 'rxjs';\r\nimport { tap, filter, mergeMap, map, toArray, catchError } from 'rxjs/operators';\r\n\r\nconst defaultPermissionList = [\r\n    {\r\n        id: 1,\r\n        date: '2016-05-02',\r\n        name: '表格',\r\n        path: 'table',\r\n        children: [],\r\n    },\r\n    {\r\n        id: 2,\r\n        date: '2016-05-02',\r\n        name: '表单',\r\n        path: 'form',\r\n        children: [],\r\n    },\r\n    {\r\n        id: 3,\r\n        date: '2016-05-02',\r\n        name: 'rxjs',\r\n        path: 'rxjs',\r\n        children: [],\r\n    },\r\n    {\r\n        id: 4,\r\n        date: '2016-05-02',\r\n        name: '列表',\r\n        path: 'list',\r\n        children: [],\r\n    },\r\n    {\r\n        id: 5,\r\n        date: '2016-05-02',\r\n        name: '富文本',\r\n        path: 'rich-text',\r\n        children: [],\r\n    },\r\n    {\r\n        id: 6,\r\n        date: '2016-05-02',\r\n        name: '小工具',\r\n        path: 'tool',\r\n        children: [],\r\n    },\r\n    {\r\n        id: 7,\r\n        date: '2016-05-02',\r\n        name: '测试路由',\r\n        path: 'test',\r\n        children: [\r\n            {\r\n                id: 8,\r\n                date: '2018-03-01',\r\n                name: '第一个',\r\n                path: 'test1',\r\n                children: []\r\n            },\r\n            {\r\n                id: 9,\r\n                date: '2018-03-01',\r\n                name: '第二个',\r\n                path: 'test2',\r\n                children: []\r\n            },\r\n            {\r\n                id: 10,\r\n                date: '2018-03-01',\r\n                name: '第三个',\r\n                path: 'test3',\r\n                children: []\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        id: 11,\r\n        date: '2016-05-02',\r\n        name: '更新日志',\r\n        path: 'update-log',\r\n        children: []\r\n    },\r\n    {\r\n        id: 12,\r\n        date: '2016-05-02',\r\n        name: '用户管理',\r\n        path: 'user',\r\n        children: [\r\n            {\r\n                id: 13,\r\n                date: '2018-02-01',\r\n                name: '用户',\r\n                path: 'user',\r\n                children: []\r\n            },\r\n            {\r\n                id: 14,\r\n                date: '2018-02-01',\r\n                name: '权限组',\r\n                path: 'group',\r\n                children: []\r\n            },\r\n            {\r\n                id: 15,\r\n                date: '2018-02-01',\r\n                name: '权限',\r\n                path: 'permission',\r\n                children: []\r\n            }\r\n        ]\r\n    }]\r\nconst defaultUserList = [\r\n    { id: 1, username: 'admin', password: 'admin', groupId: 1 }\r\n]\r\nconst defaultGroupList = [\r\n    {\r\n        id: 1,\r\n        keywrod: 'admin',\r\n        name: '管理员',\r\n        permission: '*'\r\n    }\r\n]\r\nfunction getAllPermission(item: any[], array: any[]){\r\n    item.forEach(v => {\r\n        array.push(v);\r\n        if(v.children){\r\n            getAllPermission(v.children, array)\r\n        }\r\n    })\r\n}\r\nexport namespace Permission{\r\n    export interface group {\r\n        id: number\r\n        name: string\r\n        permission: string\r\n    }\r\n    export interface user {\r\n        id: number\r\n        username: string, \r\n        password: string, \r\n        groupId: number\r\n    }\r\n    export interface permission {\r\n        id: number\r\n        date: string,\r\n        name: string,\r\n        path: string\r\n        children: permission[]\r\n    }\r\n}\r\n\r\nexport default class HttpPermission{\r\n\r\n    public static getUserList(): Observable<Permission.user[]>{\r\n        return Observable.create((obs: any) => {\r\n            obs.next(localStorage.userList ? JSON.parse(localStorage.userList) : defaultUserList)\r\n            obs.complete()\r\n        })\r\n    }\r\n    public static addUser(params:{ username: string, password: string, groupId: number }): Observable<any> {\r\n        return HttpPermission.getUserList().pipe(\r\n            tap(v => {\r\n                const id = Math.floor((new Date().getTime() / 1000000+Math.random()*100000));\r\n                v.push({ id, ...params })\r\n                localStorage.userList = JSON.stringify(v)\r\n            })\r\n        )\r\n    }\r\n    public static deleteUser(id: number): Observable<any> {\r\n        return HttpPermission.getUserList().pipe(\r\n                mergeMap(v => v),\r\n                filter(v => v.id != id),\r\n                toArray(),\r\n                tap(v => {\r\n                    localStorage.userList = JSON.stringify(v)\r\n                })\r\n            )\r\n    }\r\n    public static saveUser(params:{ username: string, password: string, groupId: number, id: number }): Observable<any> {\r\n        return Observable.create((obs: any) => {\r\n            let list: any = [];\r\n            HttpPermission.getUserList().pipe(\r\n                tap(v => list = v),\r\n                mergeMap(v => v),\r\n                filter(v => v.id == params.id),\r\n                tap(v => {\r\n                    v.username = params.username\r\n                    v.password = params.password\r\n                    v.groupId = params.groupId\r\n                    localStorage.userList = JSON.stringify(list)\r\n                }),\r\n                toArray()\r\n            ).subscribe(res => {\r\n                if(res.length){\r\n                    obs.next()\r\n                    obs.complete()\r\n                }else{\r\n                    obs.error(new Error('用户不存在'))\r\n                    obs.complete()\r\n                }\r\n            })\r\n           \r\n            \r\n        })\r\n    }\r\n\r\n    public static getGroupList(): Observable<Permission.group[]>{\r\n        return Observable.create((obs: any) => {\r\n            obs.next(localStorage.defaultGroupList ? JSON.parse(localStorage.defaultGroupList) : defaultGroupList)\r\n            obs.complete()\r\n        })\r\n    }\r\n    public static addGroup(params: { name: string, permission: string }): Observable<any> {\r\n        return HttpPermission.getGroupList().pipe(\r\n            tap(v => {\r\n                const id = Math.floor((new Date().getTime() / 1000000+Math.random()*100000));\r\n                v.push({ id, ...params })\r\n                localStorage.defaultGroupList = JSON.stringify(v)\r\n            })\r\n        )\r\n    }\r\n    public static saveGroup(params:{ name: string, permission: string, id: number }): Observable<any> {\r\n        return Observable.create((obs: any) => {\r\n            let list: any = [];\r\n            HttpPermission.getGroupList().pipe(\r\n                tap(v => list = v),\r\n                mergeMap(v => v),\r\n                filter(v => v.id == params.id),\r\n                tap(v => {\r\n                    v.name = params.name\r\n                    v.permission = params.permission\r\n                    localStorage.defaultGroupList = JSON.stringify(list)\r\n                }),\r\n                toArray()\r\n            ).subscribe(res => {\r\n                if(res.length){\r\n                    obs.next()\r\n                    obs.complete()\r\n                }else{\r\n                    obs.error(new Error('用户不存在'))\r\n                    obs.complete()\r\n                }\r\n            })\r\n           \r\n            \r\n        })\r\n    }\r\n    public static deleteGroup(id: number): Observable<any> {\r\n        return HttpPermission.getGroupList().pipe(\r\n                mergeMap(v => v),\r\n                filter(v => v.id != id),\r\n                toArray(),\r\n                tap(v => {\r\n                    localStorage.defaultGroupList = JSON.stringify(v)\r\n                })\r\n            )\r\n    }\r\n\r\n    public static getPermissionList(): Observable<Permission.permission[]>{\r\n        return Observable.create((obs: any) => {\r\n            obs.next(localStorage.permissionList? JSON.parse(localStorage.permissionList):defaultPermissionList);\r\n            obs.complete()\r\n        })\r\n    }\r\n    public static addPermission(params:{ id?: number, name: string, path: string }): Observable<any> {\r\n        return Observable.create((obs: any) => {\r\n            HttpPermission.getPermissionList().pipe(\r\n                map(v => {\r\n                    if(params.id) {\r\n                        const all: any[] = [];\r\n                        getAllPermission(v, all);\r\n                        return all.find(v => v.id == params.id)\r\n                    }\r\n                    else return v\r\n                }),\r\n                tap(v => {\r\n                    const data = {\r\n                        id: Math.floor((new Date().getTime() / 1000000+Math.random()*100000)),\r\n                        name: params.name,\r\n                        path: params.path,\r\n                        date: '2019-08-02',\r\n                        children: []\r\n                    }\r\n                    if(v.children){\r\n                        v.children.push(data);\r\n                    }else{\r\n                        defaultPermissionList.push(data)\r\n                    }\r\n                    \r\n                    localStorage.permissionList = JSON.stringify(defaultPermissionList)\r\n                    obs.next()\r\n                    obs.complete()\r\n                })\r\n            ).subscribe()\r\n        })\r\n    }\r\n    \r\n    public static savePermission(params:{ id: number, name: string, path: string }): Observable<any> {\r\n        \r\n        return Observable.create((obs: any) => {\r\n            let list: any = [];\r\n            HttpPermission.getPermissionList().pipe(\r\n                tap(v => list = v),\r\n                map(v => {\r\n                    const all: any[] = [];\r\n                    getAllPermission(v, all);\r\n                    return all.find(v => v.id == params.id)\r\n                }),\r\n                tap(v => {\r\n                    v.name = params.name\r\n                    v.path = params.path\r\n                    localStorage.permissionList = JSON.stringify(list)\r\n                    obs.next()\r\n                    obs.complete()\r\n                })\r\n            ).subscribe()\r\n        })\r\n    }\r\n\r\n    public static getUserAuth(params:{ username: string, password: string }): Observable<any>  {\r\n        return Observable.create((obs: any) => {\r\n            let isError: boolean = true;\r\n            HttpPermission.getUserList().pipe(\r\n                mergeMap(v => v),\r\n                filter(v => v.username == params.username && v.password == params.password),\r\n                map(v => v.groupId),\r\n                mergeMap(groupId => HttpPermission.getGroupList().pipe( \r\n                    mergeMap(v => v),\r\n                    filter(v => v.id == groupId),\r\n                    map(v => v.permission)\r\n                )),\r\n                mergeMap(permission => {\r\n                    isError = false;\r\n                    if(permission == '*') return of('*');\r\n                    else return HttpPermission.getPermissionList().pipe(\r\n                        map(v => {\r\n                            const auth: string[] = permission.split('-');\r\n                            const route: any[] = []\r\n                            mockGetAuth(auth, route, v)\r\n                            return route\r\n                        })\r\n                    )\r\n                }),\r\n                toArray()\r\n            ).subscribe(res => {\r\n                if(res.length){\r\n                    obs.next(res[0])\r\n                    obs.complete()\r\n                }else{\r\n                    obs.error(new Error('用户名或密码不正确'))\r\n                    obs.complete()\r\n                }\r\n            })\r\n           \r\n        })\r\n    }\r\n\r\n}\r\n\r\nfunction mockGetAuth(ids: string[], route: any[], permissions: Permission.permission[]){\r\n    \r\n    permissions.forEach(v => {\r\n        if(ids.indexOf(v.id+'') == -1) return;\r\n        const _children: any[] = [];\r\n        const children = v.children;\r\n        const router = {...v, children: _children};\r\n        route.push(router);\r\n        if(children && children.length){\r\n            mockGetAuth(ids, _children, children)\r\n        }\r\n        \r\n    })\r\n}","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function scan(accumulator, seed) {\n    var hasSeed = false;\n    if (arguments.length >= 2) {\n        hasSeed = true;\n    }\n    return function scanOperatorFunction(source) {\n        return source.lift(new ScanOperator(accumulator, seed, hasSeed));\n    };\n}\nvar ScanOperator = /*@__PURE__*/ (function () {\n    function ScanOperator(accumulator, seed, hasSeed) {\n        if (hasSeed === void 0) {\n            hasSeed = false;\n        }\n        this.accumulator = accumulator;\n        this.seed = seed;\n        this.hasSeed = hasSeed;\n    }\n    ScanOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new ScanSubscriber(subscriber, this.accumulator, this.seed, this.hasSeed));\n    };\n    return ScanOperator;\n}());\nvar ScanSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ScanSubscriber, _super);\n    function ScanSubscriber(destination, accumulator, _seed, hasSeed) {\n        var _this = _super.call(this, destination) || this;\n        _this.accumulator = accumulator;\n        _this._seed = _seed;\n        _this.hasSeed = hasSeed;\n        _this.index = 0;\n        return _this;\n    }\n    Object.defineProperty(ScanSubscriber.prototype, \"seed\", {\n        get: function () {\n            return this._seed;\n        },\n        set: function (value) {\n            this.hasSeed = true;\n            this._seed = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ScanSubscriber.prototype._next = function (value) {\n        if (!this.hasSeed) {\n            this.seed = value;\n            this.destination.next(value);\n        }\n        else {\n            return this._tryNext(value);\n        }\n    };\n    ScanSubscriber.prototype._tryNext = function (value) {\n        var index = this.index++;\n        var result;\n        try {\n            result = this.accumulator(this.seed, value, index);\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n        this.seed = result;\n        this.destination.next(result);\n    };\n    return ScanSubscriber;\n}(Subscriber));\n//# sourceMappingURL=scan.js.map\n","/** PURE_IMPORTS_START _scan,_takeLast,_defaultIfEmpty,_util_pipe PURE_IMPORTS_END */\nimport { scan } from './scan';\nimport { takeLast } from './takeLast';\nimport { defaultIfEmpty } from './defaultIfEmpty';\nimport { pipe } from '../util/pipe';\nexport function reduce(accumulator, seed) {\n    if (arguments.length >= 2) {\n        return function reduceOperatorFunctionWithSeed(source) {\n            return pipe(scan(accumulator, seed), takeLast(1), defaultIfEmpty(seed))(source);\n        };\n    }\n    return function reduceOperatorFunction(source) {\n        return pipe(scan(function (acc, value, index) { return accumulator(acc, value, index + 1); }), takeLast(1))(source);\n    };\n}\n//# sourceMappingURL=reduce.js.map\n","/** PURE_IMPORTS_START _reduce PURE_IMPORTS_END */\nimport { reduce } from './reduce';\nfunction toArrayReducer(arr, item, index) {\n    if (index === 0) {\n        return [item];\n    }\n    arr.push(item);\n    return arr;\n}\nexport function toArray() {\n    return reduce(toArrayReducer, []);\n}\n//# sourceMappingURL=toArray.js.map\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-container\"},[_c('NavigationTool',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.add()}}},[_vm._v(\"添加用户\")])],1),_c('el-card',[_c('ml-table',{attrs:{\"data\":_vm.data,\"column\":_vm.column,\"border\":\"\"},scopedSlots:_vm._u([{key:\"operating\",fn:function(row){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.edit(row.scope.id, row.scope)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.remove(row.scope.id)}}},[_vm._v(\"删除\")])]}}])})],1),_c('el-dialog',{attrs:{\"title\":_vm.editId?'编辑用户':'添加用户',\"visible\":_vm.showDialog},on:{\"update:visible\":function($event){_vm.showDialog=$event}}},[_c('el-form',{ref:\"$form\",attrs:{\"label-width\":\"100px\",\"rules\":_vm.rules,\"model\":_vm.form}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{attrs:{\"placeholder\":\"\"},model:{value:(_vm.form.username),callback:function ($$v) {_vm.$set(_vm.form, \"username\", $$v)},expression:\"form.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"placeholder\":\"\"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"权限\",\"prop\":\"groupId\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form.groupId),callback:function ($$v) {_vm.$set(_vm.form, \"groupId\", $$v)},expression:\"form.groupId\"}},_vm._l((_vm.selectData),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"保存\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue'\r\nimport Component from 'vue-class-component';\r\nimport { TableColumn } from '@/component/ts/table';\r\nimport HttpPermission, { Permission } from '@/http/permission';\r\nimport { Ref, Watch } from 'vue-property-decorator';\r\nimport { ElForm } from 'element-ui/types/form';\r\nimport { mergeMap, tap, catchError } from 'rxjs/operators';\r\nimport { forkJoin, of, throwError } from 'rxjs';\r\n@Component\r\nexport default class UserComponent extends Vue {\r\n\r\n    @Ref() private readonly $form!: ElForm;\r\n    private data: Permission.user[] = [];\r\n    private selectData: Permission.group[] = [];\r\n    private showDialog = false;\r\n    private column: TableColumn = [\r\n        { prop: 'id', title: 'id' },\r\n        { prop: 'username', title: '用户名' },\r\n        { prop: 'password', title: '密码' },\r\n        { prop: 'groupId', title: '权限id' },\r\n        { slot: 'operating', title: '编辑', width: '170' }\r\n    ]\r\n    private form = { username: '', password: '', groupId: -1 }\r\n    private rules = {\r\n        username:[  { required: true } ],\r\n        password:[  { required: true } ],\r\n        groupId:[  { required: true } ],\r\n    }\r\n    private editId: number = 0;\r\n    @Watch('showDialog')\r\n    private showDialogChange(val: boolean){\r\n        this.form = { username: '', password: '', groupId: -1 }\r\n        this.editId = 0;\r\n        this.$form && this.$form.clearValidate()\r\n    }\r\n\r\n    private add(){\r\n        this.showDialog = true;\r\n    }\r\n\r\n    private remove(id: number): void {\r\n        this.$confirm('确定删除吗').pipe(\r\n            mergeMap(v => HttpPermission.deleteUser(id)),\r\n            mergeMap(v => HttpPermission.getUserList()),\r\n            tap(v => this.data = v),\r\n            mergeMap(v => this.$message({type:'success',message:'删除成功'}))\r\n        ).subscribe()\r\n    }\r\n    \r\n    private edit(id: number, data: any): void {\r\n        this.showDialog = true;\r\n        this.$nextTick(() => {\r\n            this.editId = id;\r\n            this.form.username = data.username\r\n            this.form.password = data.password\r\n            this.form.groupId = data.groupId\r\n        })\r\n    }\r\n\r\n    private created(){\r\n\r\n        forkJoin(HttpPermission.getUserList(),  HttpPermission.getGroupList()).pipe(\r\n            tap(v => {\r\n                this.data = v[0]\r\n                this.selectData = v[1]\r\n            })\r\n        ).subscribe()\r\n\r\n    }\r\n\r\n    private submit(): void {\r\n        this.$form.validate(valid => {\r\n            if(!valid) return\r\n            this.$loading({}).pipe(\r\n                mergeMap(v => this.editId ? HttpPermission.saveUser({...this.form, id: this.editId}) : HttpPermission.addUser(this.form)),\r\n                mergeMap(v => HttpPermission.getUserList()),\r\n                tap(v => this.data = v),\r\n                mergeMap(v => this.$hideLoading()),\r\n                mergeMap(v => this.$message({type:'success',message:`${this.editId?\"编辑\":\"添加\"}成功`})),\r\n                tap(v => this.showDialog = false),\r\n                catchError(e => {\r\n                    return this.$message({type:'error', message: e}).pipe(mergeMap(v => this.$hideLoading()));\r\n                })\r\n            ).subscribe()\r\n        })\r\n    }\r\n\r\n}","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/ts-loader/index.js??ref--13-3!./user.ts?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/ts-loader/index.js??ref--13-3!./user.ts?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./user.vue?vue&type=template&id=ff309258&\"\nimport script from \"./ts/user?vue&type=script&lang=js&\"\nexport * from \"./ts/user?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/** PURE_IMPORTS_START _Observable,_util_isArray,_operators_map,_util_isObject,_from PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { map } from '../operators/map';\nimport { isObject } from '../util/isObject';\nimport { from } from './from';\nexport function forkJoin() {\n    var sources = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        sources[_i] = arguments[_i];\n    }\n    if (sources.length === 1) {\n        var first_1 = sources[0];\n        if (isArray(first_1)) {\n            return forkJoinInternal(first_1, null);\n        }\n        if (isObject(first_1) && Object.getPrototypeOf(first_1) === Object.prototype) {\n            var keys = Object.keys(first_1);\n            return forkJoinInternal(keys.map(function (key) { return first_1[key]; }), keys);\n        }\n    }\n    if (typeof sources[sources.length - 1] === 'function') {\n        var resultSelector_1 = sources.pop();\n        sources = (sources.length === 1 && isArray(sources[0])) ? sources[0] : sources;\n        return forkJoinInternal(sources, null).pipe(map(function (args) { return resultSelector_1.apply(void 0, args); }));\n    }\n    return forkJoinInternal(sources, null);\n}\nfunction forkJoinInternal(sources, keys) {\n    return new Observable(function (subscriber) {\n        var len = sources.length;\n        if (len === 0) {\n            subscriber.complete();\n            return;\n        }\n        var values = new Array(len);\n        var completed = 0;\n        var emitted = 0;\n        var _loop_1 = function (i) {\n            var source = from(sources[i]);\n            var hasValue = false;\n            subscriber.add(source.subscribe({\n                next: function (value) {\n                    if (!hasValue) {\n                        hasValue = true;\n                        emitted++;\n                    }\n                    values[i] = value;\n                },\n                error: function (err) { return subscriber.error(err); },\n                complete: function () {\n                    completed++;\n                    if (completed === len || !hasValue) {\n                        if (emitted === len) {\n                            subscriber.next(keys ?\n                                keys.reduce(function (result, key, i) { return (result[key] = values[i], result); }, {}) :\n                                values);\n                        }\n                        subscriber.complete();\n                    }\n                }\n            }));\n        };\n        for (var i = 0; i < len; i++) {\n            _loop_1(i);\n        }\n    });\n}\n//# sourceMappingURL=forkJoin.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function filter(predicate, thisArg) {\n    return function filterOperatorFunction(source) {\n        return source.lift(new FilterOperator(predicate, thisArg));\n    };\n}\nvar FilterOperator = /*@__PURE__*/ (function () {\n    function FilterOperator(predicate, thisArg) {\n        this.predicate = predicate;\n        this.thisArg = thisArg;\n    }\n    FilterOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new FilterSubscriber(subscriber, this.predicate, this.thisArg));\n    };\n    return FilterOperator;\n}());\nvar FilterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(FilterSubscriber, _super);\n    function FilterSubscriber(destination, predicate, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.thisArg = thisArg;\n        _this.count = 0;\n        return _this;\n    }\n    FilterSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.predicate.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (result) {\n            this.destination.next(value);\n        }\n    };\n    return FilterSubscriber;\n}(Subscriber));\n//# sourceMappingURL=filter.js.map\n"],"sourceRoot":""}