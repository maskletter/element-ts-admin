{"version":3,"sources":["webpack:///./node_modules/rxjs/_esm5/internal/operators/takeLast.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/defaultIfEmpty.js","webpack:///./src/http/permission.ts","webpack:///./node_modules/rxjs/_esm5/internal/operators/scan.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/reduce.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/toArray.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/filter.js","webpack:///./src/permission/permission.vue?798f","webpack:///./src/permission/ts/permission.ts","webpack:///./src/permission/ts/permission.ts?e6ee","webpack:///./src/permission/permission.vue"],"names":["takeLast","count","source","lift","TakeLastOperator","total","this","prototype","call","subscriber","subscribe","TakeLastSubscriber","_super","destination","_this","ring","Array","_next","value","length","push","index","_complete","i","idx","next","complete","defaultIfEmpty","defaultValue","DefaultIfEmptyOperator","DefaultIfEmptySubscriber","isEmpty","defaultPermissionList","id","date","name","path","children","defaultUserList","username","password","groupId","defaultGroupList","keywrod","permission","getAllPermission","item","array","forEach","v","getUserList","create","obs","localStorage","userList","JSON","parse","addUser","params","HttpPermission","pipe","Math","floor","Date","getTime","random","stringify","deleteUser","saveUser","list","res","error","Error","getGroupList","addGroup","saveGroup","deleteGroup","getPermissionList","permissionList","addPermission","all","find","data","savePermission","getUserAuth","auth","split","route","mockGetAuth","ids","permissions","indexOf","_children","router","scan","accumulator","seed","hasSeed","arguments","ScanOperator","ScanSubscriber","_seed","Object","defineProperty","get","set","enumerable","configurable","_tryNext","result","err","Subscriber","reduce","acc","toArrayReducer","arr","toArray","filter","predicate","thisArg","FilterOperator","FilterSubscriber","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","$event","add","_v","hasChildren","column","scopedSlots","_u","key","fn","row","edit","scope","editId","isAddChild","showDialog","staticStyle","_e","ref","dataFrom","formSubmit","staticRenderFns","prop","title","slot","align","width","type","label","rule","required","message","created","$nextTick","$form","setData","e","$loading","mergeMap","tap","$message","PermissionComponent","component"],"mappings":"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","file":"js/chunk-2c0149a8.93222abe.js","sourcesContent":["/** PURE_IMPORTS_START tslib,_Subscriber,_util_ArgumentOutOfRangeError,_observable_empty PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { ArgumentOutOfRangeError } from '../util/ArgumentOutOfRangeError';\nimport { empty } from '../observable/empty';\nexport function takeLast(count) {\n    return function takeLastOperatorFunction(source) {\n        if (count === 0) {\n            return empty();\n        }\n        else {\n            return source.lift(new TakeLastOperator(count));\n        }\n    };\n}\nvar TakeLastOperator = /*@__PURE__*/ (function () {\n    function TakeLastOperator(total) {\n        this.total = total;\n        if (this.total < 0) {\n            throw new ArgumentOutOfRangeError;\n        }\n    }\n    TakeLastOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new TakeLastSubscriber(subscriber, this.total));\n    };\n    return TakeLastOperator;\n}());\nvar TakeLastSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(TakeLastSubscriber, _super);\n    function TakeLastSubscriber(destination, total) {\n        var _this = _super.call(this, destination) || this;\n        _this.total = total;\n        _this.ring = new Array();\n        _this.count = 0;\n        return _this;\n    }\n    TakeLastSubscriber.prototype._next = function (value) {\n        var ring = this.ring;\n        var total = this.total;\n        var count = this.count++;\n        if (ring.length < total) {\n            ring.push(value);\n        }\n        else {\n            var index = count % total;\n            ring[index] = value;\n        }\n    };\n    TakeLastSubscriber.prototype._complete = function () {\n        var destination = this.destination;\n        var count = this.count;\n        if (count > 0) {\n            var total = this.count >= this.total ? this.total : this.count;\n            var ring = this.ring;\n            for (var i = 0; i < total; i++) {\n                var idx = (count++) % total;\n                destination.next(ring[idx]);\n            }\n        }\n        destination.complete();\n    };\n    return TakeLastSubscriber;\n}(Subscriber));\n//# sourceMappingURL=takeLast.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function defaultIfEmpty(defaultValue) {\n    if (defaultValue === void 0) {\n        defaultValue = null;\n    }\n    return function (source) { return source.lift(new DefaultIfEmptyOperator(defaultValue)); };\n}\nvar DefaultIfEmptyOperator = /*@__PURE__*/ (function () {\n    function DefaultIfEmptyOperator(defaultValue) {\n        this.defaultValue = defaultValue;\n    }\n    DefaultIfEmptyOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DefaultIfEmptySubscriber(subscriber, this.defaultValue));\n    };\n    return DefaultIfEmptyOperator;\n}());\nvar DefaultIfEmptySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(DefaultIfEmptySubscriber, _super);\n    function DefaultIfEmptySubscriber(destination, defaultValue) {\n        var _this = _super.call(this, destination) || this;\n        _this.defaultValue = defaultValue;\n        _this.isEmpty = true;\n        return _this;\n    }\n    DefaultIfEmptySubscriber.prototype._next = function (value) {\n        this.isEmpty = false;\n        this.destination.next(value);\n    };\n    DefaultIfEmptySubscriber.prototype._complete = function () {\n        if (this.isEmpty) {\n            this.destination.next(this.defaultValue);\n        }\n        this.destination.complete();\n    };\n    return DefaultIfEmptySubscriber;\n}(Subscriber));\n//# sourceMappingURL=defaultIfEmpty.js.map\n","import { Observable, of, throwError } from 'rxjs';\r\nimport { tap, filter, mergeMap, map, toArray, catchError } from 'rxjs/operators';\r\n\r\nconst defaultPermissionList = [\r\n    {\r\n        id: 1,\r\n        date: '2016-05-02',\r\n        name: '表格',\r\n        path: 'table',\r\n        children: [],\r\n    },\r\n    {\r\n        id: 2,\r\n        date: '2016-05-02',\r\n        name: '表单',\r\n        path: 'form',\r\n        children: [],\r\n    },\r\n    {\r\n        id: 3,\r\n        date: '2016-05-02',\r\n        name: 'rxjs',\r\n        path: 'rxjs',\r\n        children: [],\r\n    },\r\n    {\r\n        id: 4,\r\n        date: '2016-05-02',\r\n        name: '列表',\r\n        path: 'list',\r\n        children: [],\r\n    },\r\n    {\r\n        id: 5,\r\n        date: '2016-05-02',\r\n        name: '富文本',\r\n        path: 'rich-text',\r\n        children: [],\r\n    },\r\n    {\r\n        id: 6,\r\n        date: '2016-05-02',\r\n        name: '小工具',\r\n        path: 'tool',\r\n        children: [],\r\n    },\r\n    {\r\n        id: 7,\r\n        date: '2016-05-02',\r\n        name: '测试路由',\r\n        path: 'test',\r\n        children: [\r\n            {\r\n                id: 8,\r\n                date: '2018-03-01',\r\n                name: '第一个',\r\n                path: 'test1',\r\n                children: []\r\n            },\r\n            {\r\n                id: 9,\r\n                date: '2018-03-01',\r\n                name: '第二个',\r\n                path: 'test2',\r\n                children: []\r\n            },\r\n            {\r\n                id: 10,\r\n                date: '2018-03-01',\r\n                name: '第三个',\r\n                path: 'test3',\r\n                children: []\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        id: 11,\r\n        date: '2016-05-02',\r\n        name: '更新日志',\r\n        path: 'update-log',\r\n        children: []\r\n    },\r\n    {\r\n        id: 12,\r\n        date: '2016-05-02',\r\n        name: '用户管理',\r\n        path: 'user',\r\n        children: [\r\n            {\r\n                id: 13,\r\n                date: '2018-02-01',\r\n                name: '用户',\r\n                path: 'user',\r\n                children: []\r\n            },\r\n            {\r\n                id: 14,\r\n                date: '2018-02-01',\r\n                name: '权限组',\r\n                path: 'group',\r\n                children: []\r\n            },\r\n            {\r\n                id: 15,\r\n                date: '2018-02-01',\r\n                name: '权限',\r\n                path: 'permission',\r\n                children: []\r\n            }\r\n        ]\r\n    }]\r\nconst defaultUserList = [\r\n    { id: 1, username: 'admin', password: 'admin', groupId: 1 }\r\n]\r\nconst defaultGroupList = [\r\n    {\r\n        id: 1,\r\n        keywrod: 'admin',\r\n        name: '管理员',\r\n        permission: '*'\r\n    }\r\n]\r\nfunction getAllPermission(item: any[], array: any[]){\r\n    item.forEach(v => {\r\n        array.push(v);\r\n        if(v.children){\r\n            getAllPermission(v.children, array)\r\n        }\r\n    })\r\n}\r\nexport namespace Permission{\r\n    export interface group {\r\n        id: number\r\n        name: string\r\n        permission: string\r\n    }\r\n    export interface user {\r\n        id: number\r\n        username: string, \r\n        password: string, \r\n        groupId: number\r\n    }\r\n    export interface permission {\r\n        id: number\r\n        date: string,\r\n        name: string,\r\n        path: string\r\n        children: permission[]\r\n    }\r\n}\r\n\r\nexport default class HttpPermission{\r\n\r\n    public static getUserList(): Observable<Permission.user[]>{\r\n        return Observable.create((obs: any) => {\r\n            obs.next(localStorage.userList ? JSON.parse(localStorage.userList) : defaultUserList)\r\n            obs.complete()\r\n        })\r\n    }\r\n    public static addUser(params:{ username: string, password: string, groupId: number }): Observable<any> {\r\n        return HttpPermission.getUserList().pipe(\r\n            tap(v => {\r\n                const id = Math.floor((new Date().getTime() / 1000000+Math.random()*100000));\r\n                v.push({ id, ...params })\r\n                localStorage.userList = JSON.stringify(v)\r\n            })\r\n        )\r\n    }\r\n    public static deleteUser(id: number): Observable<any> {\r\n        return HttpPermission.getUserList().pipe(\r\n                mergeMap(v => v),\r\n                filter(v => v.id != id),\r\n                toArray(),\r\n                tap(v => {\r\n                    localStorage.userList = JSON.stringify(v)\r\n                })\r\n            )\r\n    }\r\n    public static saveUser(params:{ username: string, password: string, groupId: number, id: number }): Observable<any> {\r\n        return Observable.create((obs: any) => {\r\n            let list: any = [];\r\n            HttpPermission.getUserList().pipe(\r\n                tap(v => list = v),\r\n                mergeMap(v => v),\r\n                filter(v => v.id == params.id),\r\n                tap(v => {\r\n                    v.username = params.username\r\n                    v.password = params.password\r\n                    v.groupId = params.groupId\r\n                    localStorage.userList = JSON.stringify(list)\r\n                }),\r\n                toArray()\r\n            ).subscribe(res => {\r\n                if(res.length){\r\n                    obs.next()\r\n                    obs.complete()\r\n                }else{\r\n                    obs.error(new Error('用户不存在'))\r\n                    obs.complete()\r\n                }\r\n            })\r\n           \r\n            \r\n        })\r\n    }\r\n\r\n    public static getGroupList(): Observable<Permission.group[]>{\r\n        return Observable.create((obs: any) => {\r\n            obs.next(localStorage.defaultGroupList ? JSON.parse(localStorage.defaultGroupList) : defaultGroupList)\r\n            obs.complete()\r\n        })\r\n    }\r\n    public static addGroup(params: { name: string, permission: string }): Observable<any> {\r\n        return HttpPermission.getGroupList().pipe(\r\n            tap(v => {\r\n                const id = Math.floor((new Date().getTime() / 1000000+Math.random()*100000));\r\n                v.push({ id, ...params })\r\n                localStorage.defaultGroupList = JSON.stringify(v)\r\n            })\r\n        )\r\n    }\r\n    public static saveGroup(params:{ name: string, permission: string, id: number }): Observable<any> {\r\n        return Observable.create((obs: any) => {\r\n            let list: any = [];\r\n            HttpPermission.getGroupList().pipe(\r\n                tap(v => list = v),\r\n                mergeMap(v => v),\r\n                filter(v => v.id == params.id),\r\n                tap(v => {\r\n                    v.name = params.name\r\n                    v.permission = params.permission\r\n                    localStorage.defaultGroupList = JSON.stringify(list)\r\n                }),\r\n                toArray()\r\n            ).subscribe(res => {\r\n                if(res.length){\r\n                    obs.next()\r\n                    obs.complete()\r\n                }else{\r\n                    obs.error(new Error('用户不存在'))\r\n                    obs.complete()\r\n                }\r\n            })\r\n           \r\n            \r\n        })\r\n    }\r\n    public static deleteGroup(id: number): Observable<any> {\r\n        return HttpPermission.getGroupList().pipe(\r\n                mergeMap(v => v),\r\n                filter(v => v.id != id),\r\n                toArray(),\r\n                tap(v => {\r\n                    localStorage.defaultGroupList = JSON.stringify(v)\r\n                })\r\n            )\r\n    }\r\n\r\n    public static getPermissionList(): Observable<Permission.permission[]>{\r\n        return Observable.create((obs: any) => {\r\n            obs.next(localStorage.permissionList? JSON.parse(localStorage.permissionList):defaultPermissionList);\r\n            obs.complete()\r\n        })\r\n    }\r\n    public static addPermission(params:{ id?: number, name: string, path: string }): Observable<any> {\r\n        return Observable.create((obs: any) => {\r\n            HttpPermission.getPermissionList().pipe(\r\n                map(v => {\r\n                    if(params.id) {\r\n                        const all: any[] = [];\r\n                        getAllPermission(v, all);\r\n                        return all.find(v => v.id == params.id)\r\n                    }\r\n                    else return v\r\n                }),\r\n                tap(v => {\r\n                    const data = {\r\n                        id: Math.floor((new Date().getTime() / 1000000+Math.random()*100000)),\r\n                        name: params.name,\r\n                        path: params.path,\r\n                        date: '2019-08-02',\r\n                        children: []\r\n                    }\r\n                    if(v.children){\r\n                        v.children.push(data);\r\n                    }else{\r\n                        defaultPermissionList.push(data)\r\n                    }\r\n                    \r\n                    localStorage.permissionList = JSON.stringify(defaultPermissionList)\r\n                    obs.next()\r\n                    obs.complete()\r\n                })\r\n            ).subscribe()\r\n        })\r\n    }\r\n    \r\n    public static savePermission(params:{ id: number, name: string, path: string }): Observable<any> {\r\n        \r\n        return Observable.create((obs: any) => {\r\n            let list: any = [];\r\n            HttpPermission.getPermissionList().pipe(\r\n                tap(v => list = v),\r\n                map(v => {\r\n                    const all: any[] = [];\r\n                    getAllPermission(v, all);\r\n                    return all.find(v => v.id == params.id)\r\n                }),\r\n                tap(v => {\r\n                    v.name = params.name\r\n                    v.path = params.path\r\n                    localStorage.permissionList = JSON.stringify(list)\r\n                    obs.next()\r\n                    obs.complete()\r\n                })\r\n            ).subscribe()\r\n        })\r\n    }\r\n\r\n    public static getUserAuth(params:{ username: string, password: string }): Observable<any>  {\r\n        return Observable.create((obs: any) => {\r\n            let isError: boolean = true;\r\n            HttpPermission.getUserList().pipe(\r\n                mergeMap(v => v),\r\n                filter(v => v.username == params.username && v.password == params.password),\r\n                map(v => v.groupId),\r\n                mergeMap(groupId => HttpPermission.getGroupList().pipe( \r\n                    mergeMap(v => v),\r\n                    filter(v => v.id == groupId),\r\n                    map(v => v.permission)\r\n                )),\r\n                mergeMap(permission => {\r\n                    isError = false;\r\n                    if(permission == '*') return of('*');\r\n                    else return HttpPermission.getPermissionList().pipe(\r\n                        map(v => {\r\n                            const auth: string[] = permission.split('-');\r\n                            const route: any[] = []\r\n                            mockGetAuth(auth, route, v)\r\n                            return route\r\n                        })\r\n                    )\r\n                }),\r\n                toArray()\r\n            ).subscribe(res => {\r\n                if(res.length){\r\n                    obs.next(res[0])\r\n                    obs.complete()\r\n                }else{\r\n                    obs.error(new Error('用户名或密码不正确'))\r\n                    obs.complete()\r\n                }\r\n            })\r\n           \r\n        })\r\n    }\r\n\r\n}\r\n\r\nfunction mockGetAuth(ids: string[], route: any[], permissions: Permission.permission[]){\r\n    \r\n    permissions.forEach(v => {\r\n        if(ids.indexOf(v.id+'') == -1) return;\r\n        const _children: any[] = [];\r\n        const children = v.children;\r\n        const router = {...v, children: _children};\r\n        route.push(router);\r\n        if(children && children.length){\r\n            mockGetAuth(ids, _children, children)\r\n        }\r\n        \r\n    })\r\n}","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function scan(accumulator, seed) {\n    var hasSeed = false;\n    if (arguments.length >= 2) {\n        hasSeed = true;\n    }\n    return function scanOperatorFunction(source) {\n        return source.lift(new ScanOperator(accumulator, seed, hasSeed));\n    };\n}\nvar ScanOperator = /*@__PURE__*/ (function () {\n    function ScanOperator(accumulator, seed, hasSeed) {\n        if (hasSeed === void 0) {\n            hasSeed = false;\n        }\n        this.accumulator = accumulator;\n        this.seed = seed;\n        this.hasSeed = hasSeed;\n    }\n    ScanOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new ScanSubscriber(subscriber, this.accumulator, this.seed, this.hasSeed));\n    };\n    return ScanOperator;\n}());\nvar ScanSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ScanSubscriber, _super);\n    function ScanSubscriber(destination, accumulator, _seed, hasSeed) {\n        var _this = _super.call(this, destination) || this;\n        _this.accumulator = accumulator;\n        _this._seed = _seed;\n        _this.hasSeed = hasSeed;\n        _this.index = 0;\n        return _this;\n    }\n    Object.defineProperty(ScanSubscriber.prototype, \"seed\", {\n        get: function () {\n            return this._seed;\n        },\n        set: function (value) {\n            this.hasSeed = true;\n            this._seed = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ScanSubscriber.prototype._next = function (value) {\n        if (!this.hasSeed) {\n            this.seed = value;\n            this.destination.next(value);\n        }\n        else {\n            return this._tryNext(value);\n        }\n    };\n    ScanSubscriber.prototype._tryNext = function (value) {\n        var index = this.index++;\n        var result;\n        try {\n            result = this.accumulator(this.seed, value, index);\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n        this.seed = result;\n        this.destination.next(result);\n    };\n    return ScanSubscriber;\n}(Subscriber));\n//# sourceMappingURL=scan.js.map\n","/** PURE_IMPORTS_START _scan,_takeLast,_defaultIfEmpty,_util_pipe PURE_IMPORTS_END */\nimport { scan } from './scan';\nimport { takeLast } from './takeLast';\nimport { defaultIfEmpty } from './defaultIfEmpty';\nimport { pipe } from '../util/pipe';\nexport function reduce(accumulator, seed) {\n    if (arguments.length >= 2) {\n        return function reduceOperatorFunctionWithSeed(source) {\n            return pipe(scan(accumulator, seed), takeLast(1), defaultIfEmpty(seed))(source);\n        };\n    }\n    return function reduceOperatorFunction(source) {\n        return pipe(scan(function (acc, value, index) { return accumulator(acc, value, index + 1); }), takeLast(1))(source);\n    };\n}\n//# sourceMappingURL=reduce.js.map\n","/** PURE_IMPORTS_START _reduce PURE_IMPORTS_END */\nimport { reduce } from './reduce';\nfunction toArrayReducer(arr, item, index) {\n    if (index === 0) {\n        return [item];\n    }\n    arr.push(item);\n    return arr;\n}\nexport function toArray() {\n    return reduce(toArrayReducer, []);\n}\n//# sourceMappingURL=toArray.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function filter(predicate, thisArg) {\n    return function filterOperatorFunction(source) {\n        return source.lift(new FilterOperator(predicate, thisArg));\n    };\n}\nvar FilterOperator = /*@__PURE__*/ (function () {\n    function FilterOperator(predicate, thisArg) {\n        this.predicate = predicate;\n        this.thisArg = thisArg;\n    }\n    FilterOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new FilterSubscriber(subscriber, this.predicate, this.thisArg));\n    };\n    return FilterOperator;\n}());\nvar FilterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(FilterSubscriber, _super);\n    function FilterSubscriber(destination, predicate, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.thisArg = thisArg;\n        _this.count = 0;\n        return _this;\n    }\n    FilterSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.predicate.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (result) {\n            this.destination.next(value);\n        }\n    };\n    return FilterSubscriber;\n}(Subscriber));\n//# sourceMappingURL=filter.js.map\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-container\"},[_c('NavigationTool',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.add()}}},[_vm._v(\"添加\")])],1),_c('el-card',[_c('MlTable',{attrs:{\"data\":_vm.data,\"tree-props\":{children: 'children', hasChildren: 'hasChildren'},\"column\":_vm.column,\"row-key\":\"id\",\"default-expand-all\":\"\",\"border\":true},scopedSlots:_vm._u([{key:\"operating\",fn:function(row){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.edit(row.scope.id, row.scope)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.add(row.scope.id)}}},[_vm._v(\"添加子项\")])]}}])})],1),_c('el-dialog',{attrs:{\"title\":_vm.editId&&!_vm.isAddChild?'编辑':'添加',\"visible\":_vm.showDialog},on:{\"update:visible\":function($event){_vm.showDialog=$event}}},[(_vm.isAddChild)?_c('h1',{staticStyle:{\"margin-top\":\"-20px\"}},[_vm._v(\"添加子项\")]):_vm._e(),_c('br'),_c('ml-form',{ref:\"$form\",attrs:{\"data\":_vm.dataFrom,\"label-width\":\"60px\",\"confirm-button-text\":\"确定\"},on:{\"submit\":_vm.formSubmit}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue'\r\nimport Component from 'vue-class-component';\r\nimport { TableColumn } from '@/component/ts/table';\r\nimport HttpPermission, { Permission } from '@/http/permission';\r\nimport { Watch, Ref } from 'vue-property-decorator';\r\nimport FormComponent, { CreateFormData } from '@/component/ts/form';\r\nimport { mergeMap, tap, skipUntil } from 'rxjs/operators';\r\n@Component\r\nexport default class PermissionComponent extends Vue {\r\n\r\n    @Ref() private readonly $form!: FormComponent;\r\n    private data: Permission.permission[] = []\r\n    private column: TableColumn = [\r\n        { prop: 'name', title: '姓名' },\r\n        { prop: 'path', title: '路径' },\r\n        { prop: 'date', title: '时间' },\r\n        { slot: 'operating', title: '操作', align:'center', width: '200' },\r\n    ]\r\n    private dataFrom: CreateFormData = {\r\n        name:{\r\n            type:'text',\r\n            label:'名称',\r\n            rule:[\r\n                { required: true, message: '请输入' },\r\n            ]\r\n        },\r\n        path:{\r\n            type:'text',\r\n            label:'路径',\r\n            rule:[\r\n                { required: true, message: '请输入' },\r\n            ]\r\n        }\r\n    }\r\n    private isAddChild: boolean = false;\r\n    private showDialog = false;\r\n    private editId: number = 0;\r\n \r\n\r\n    private created(){\r\n        HttpPermission.getPermissionList().subscribe(res => {\r\n            this.data = res;\r\n        })\r\n    }\r\n\r\n    private edit(id: number, data: any): void {\r\n        this.editId = id;\r\n        this.showDialog = true;\r\n        \r\n        this.$nextTick(() => this.$form.setData({\r\n            name: data.name,\r\n            path: data.path\r\n        }))\r\n    }\r\n    private add(id: number): void {\r\n        this.showDialog = true;\r\n        if(id){\r\n            this.isAddChild = true;\r\n            this.editId = id\r\n        }\r\n        this.$nextTick(() => this.$form.setData({\r\n            name: '',\r\n            path: ''\r\n        }))\r\n    }\r\n\r\n    private formSubmit(e: any){\r\n        e.id = this.editId;\r\n        this.$loading({}).pipe(\r\n            mergeMap(v => {\r\n                if(this.editId && this.isAddChild || !this.editId){\r\n                    return HttpPermission.addPermission(e)\r\n                }else{\r\n                    return HttpPermission.savePermission(e)\r\n                }\r\n            }),\r\n            mergeMap(v => HttpPermission.getPermissionList()),\r\n            tap(v => {\r\n                this.editId = 0, this.showDialog=false;this.isAddChild=false\r\n                this.data = v;\r\n            }),\r\n            mergeMap(v => this.$hideLoading()),\r\n            tap(v => this.$message({type:'success',message:'编辑成功'}).subscribe())\r\n        ).subscribe()\r\n     \r\n    }\r\n\r\n\r\n}","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/ts-loader/index.js??ref--13-3!./permission.ts?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/ts-loader/index.js??ref--13-3!./permission.ts?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./permission.vue?vue&type=template&id=1979f776&\"\nimport script from \"./ts/permission?vue&type=script&lang=js&\"\nexport * from \"./ts/permission?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}